# Сервис управления рассылками

Сервис, который запускает рассылку по списку клиентов по заданным правилам:
- После создания новой рассылки, если текущее время больше времени начала и меньше времени окончания - из справочника выбираются все клиенты, которые подходят под значения фильтра, указанного в этой рассылке и запускается отправка для всех этих клиентов. Для отправки использовать сообщение, которое прикреплено к рассылке.
- Если создаётся рассылка с временем старта в будущем - отправка стартует автоматически по наступлению этого времени без дополнительных действий со стороны пользователя системы.
- Если по каким-то причинам не успели разослать все сообщения - никакие сообщения клиентам после этого времени не доставляются.

### Установка и запуск локальной версии с помощью docker-compose
Клонируйте репозиторий:
```shell
git clone https://github.com/evgen4ikrus/messages-sending-service.git
```
Скачайте и соберите докер-образы с помощью Docker-Сompose:
```shell
docker-compose build
``` 
Запустите докер-контейнеры:
``` shell
docker compose up
```
В новом терминале накатите свежие миграции БД:
```shell
docker-compose run --rm web-app sh -c "python manage.py migrate"
```
Вход в админку находится по адресу http://0.0.0.0:8000/admin/

Вы можете загрузить тестовую базу данных:
```shell
docker-compose run --rm web-app sh -c "python manage.py loaddata db.json
```
В тестовой БД уже создан суперпользователь с логином `root`, паролем `123` (воспользуйтесь для входа в админку).

При создании рассылок, сообщения для клиентов будут отправляться в консоль.
